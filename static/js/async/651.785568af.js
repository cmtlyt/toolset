"use strict";(self.webpackChunk_cmtlyt_toolset=self.webpackChunk_cmtlyt_toolset||[]).push([["651"],{8096:function(e,n,r){r.r(n),r.d(n,{default:function(){return t}});var s=r(2676),d=r(453),c=r(2287);function i(e){let n=Object.assign({h1:"h1",a:"a",h2:"h2",p:"p",h3:"h3",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td",div:"div",code:"code",hr:"hr",strong:"strong",h4:"h4"},(0,d.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.h1,{id:"创建-worker-函数",children:[(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#创建-worker-函数",children:"#"}),"创建 Worker 函数"]}),"\n",(0,s.jsx)(c.Z,{defaultLocale:"zh-CN"}),"\n",(0,s.jsxs)(n.h2,{id:"createworkerfunc---function",children:[(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#createworkerfunc---function",children:"#"}),"createWorkerFunc - (function)"]}),"\n",(0,s.jsx)(n.p,{children:"创建一个在 Worker 中运行的函数"}),"\n",(0,s.jsxs)(n.h3,{id:"参数",children:[(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#参数",children:"#"}),"参数"]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{align:"center",children:"必填"}),(0,s.jsx)(n.th,{children:"参数名"}),(0,s.jsx)(n.th,{children:"说明"}),(0,s.jsx)(n.th,{children:"类型"}),(0,s.jsx)(n.th,{children:"默认值"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{align:"center",children:"*"}),(0,s.jsx)(n.td,{children:"func"}),(0,s.jsx)(n.td,{children:"要在 Worker 中运行的函数"}),(0,s.jsx)(n.td,{children:"(...args:any[])=>any"}),(0,s.jsx)(n.td,{children:"-"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{align:"center"}),(0,s.jsx)(n.td,{children:"importScripts"}),(0,s.jsx)(n.td,{children:"Worker 运行时需要加载的脚本"}),(0,s.jsx)(n.td,{children:"string[]"}),(0,s.jsx)(n.td,{children:"[]"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{align:"center"}),(0,s.jsx)(n.td,{children:"options"}),(0,s.jsx)(n.td,{children:"选项"}),(0,s.jsx)(n.td,{children:"object"}),(0,s.jsx)(n.td,{children:"{}"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{align:"center"}),(0,s.jsx)(n.td,{children:"options.reuse"}),(0,s.jsx)(n.td,{children:"是否复用 Worker"}),(0,s.jsx)(n.td,{children:"boolean"}),(0,s.jsx)(n.td,{children:"true"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{align:"center"}),(0,s.jsx)(n.td,{children:"options.needPost"}),(0,s.jsx)(n.td,{children:"是否需要将所有参数打包为数组"}),(0,s.jsx)(n.td,{children:"boolean"}),(0,s.jsx)(n.td,{children:"false"})]})]})]}),"\n",(0,s.jsxs)(n.div,{className:"rspress-directive danger",children:[(0,s.jsx)(n.div,{className:"rspress-directive-title",children:"警告"}),(0,s.jsxs)(n.div,{className:"rspress-directive-content",children:[(0,s.jsxs)(n.p,{children:["\n",(0,s.jsx)(n.code,{children:"needPost"})," 为 ",(0,s.jsx)(n.code,{children:"true"})," 时, ",(0,s.jsx)(n.code,{children:"func"})," 的第一个参数会被替换为 ",(0,s.jsx)(n.code,{children:"postMessage"}),", 用户自己的参数从形参列表第二项开始"]}),(0,s.jsx)(n.hr,{}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"postMessage"})}),(0,s.jsx)(n.p,{children:"运行中返回中间结果"}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"参数"})}),(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{align:"center",children:"必填"}),(0,s.jsx)(n.th,{children:"参数名"}),(0,s.jsx)(n.th,{children:"说明"}),(0,s.jsx)(n.th,{children:"类型"}),(0,s.jsx)(n.th,{children:"默认值"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{align:"center",children:"*"}),(0,s.jsx)(n.td,{children:"data"}),(0,s.jsx)(n.td,{children:"要发送的数据"}),(0,s.jsx)(n.td,{children:"any"}),(0,s.jsx)(n.td,{children:"-"})]})})]}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"返回值"})}),(0,s.jsx)(n.p,{children:"无"})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.h3,{id:"返回值",children:[(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#返回值",children:"#"}),"返回值"]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"类型"}),(0,s.jsx)(n.th,{children:"说明"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"IWorkerFuncs"}),(0,s.jsxs)(n.td,{children:["包含了 ",(0,s.jsx)(n.code,{children:"run"})," ",(0,s.jsx)(n.code,{children:"dispose"})," ",(0,s.jsx)(n.code,{children:"on"})," ",(0,s.jsx)(n.code,{children:"remove"})," ",(0,s.jsx)(n.code,{children:"clearOn"})," ",(0,s.jsx)(n.code,{children:"onOnce"})," 方法的对象"]})]})})]}),"\n",(0,s.jsxs)(n.h4,{id:"run",children:[(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#run",children:"#"}),"run"]}),"\n",(0,s.jsx)(n.p,{children:"运行函数"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"参数"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{align:"center",children:"必填"}),(0,s.jsx)(n.th,{children:"参数名"}),(0,s.jsx)(n.th,{children:"说明"}),(0,s.jsx)(n.th,{children:"类型"}),(0,s.jsx)(n.th,{children:"默认值"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{align:"center",children:"*"}),(0,s.jsx)(n.td,{children:"...args"}),(0,s.jsx)(n.td,{children:"和传入 func 相同的参数列表"}),(0,s.jsx)(n.td,{children:"any[]"}),(0,s.jsx)(n.td,{children:"-"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"返回值"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"类型"}),(0,s.jsx)(n.th,{children:"说明"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Promise"}),(0,s.jsx)(n.td,{children:"func 的返回结果在 Promise 的 then 中接收"})]})})]}),"\n",(0,s.jsxs)(n.h4,{id:"dispose",children:[(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#dispose",children:"#"}),"dispose"]}),"\n",(0,s.jsx)(n.p,{children:"销毁 Worker"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"参数"})}),"\n",(0,s.jsx)(n.p,{children:"无"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"返回值"})}),"\n",(0,s.jsx)(n.p,{children:"无"}),"\n",(0,s.jsxs)(n.div,{className:"rspress-directive warning",children:[(0,s.jsx)(n.div,{className:"rspress-directive-title",children:"警告"}),(0,s.jsx)(n.div,{className:"rspress-directive-content",children:(0,s.jsx)(n.p,{children:"\n下面的方法只有在 needPost 为 true 时才有效"})})]}),"\n",(0,s.jsxs)(n.h4,{id:"on",children:[(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#on",children:"#"}),"on"]}),"\n",(0,s.jsx)(n.p,{children:"监听 postMessage 发送的消息"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"参数"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{align:"center",children:"必填"}),(0,s.jsx)(n.th,{children:"参数名"}),(0,s.jsx)(n.th,{children:"说明"}),(0,s.jsx)(n.th,{children:"类型"}),(0,s.jsx)(n.th,{children:"默认值"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{align:"center",children:"*"}),(0,s.jsx)(n.td,{children:"callback"}),(0,s.jsx)(n.td,{children:"回调函数"}),(0,s.jsx)(n.td,{children:"(data: any) => void"}),(0,s.jsx)(n.td,{children:"-"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"返回值"})}),"\n",(0,s.jsx)(n.p,{children:"无"}),"\n",(0,s.jsxs)(n.h4,{id:"remove",children:[(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#remove",children:"#"}),"remove"]}),"\n",(0,s.jsx)(n.p,{children:"移除监听"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"参数"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{align:"center",children:"必填"}),(0,s.jsx)(n.th,{children:"参数名"}),(0,s.jsx)(n.th,{children:"说明"}),(0,s.jsx)(n.th,{children:"类型"}),(0,s.jsx)(n.th,{children:"默认值"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{align:"center",children:"*"}),(0,s.jsx)(n.td,{children:"callback"}),(0,s.jsx)(n.td,{children:"回调函数"}),(0,s.jsx)(n.td,{children:"TAnyFunc"}),(0,s.jsx)(n.td,{children:"-"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"返回值"})}),"\n",(0,s.jsx)(n.p,{children:"无"}),"\n",(0,s.jsxs)(n.h4,{id:"clearon",children:[(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#clearon",children:"#"}),"clearOn"]}),"\n",(0,s.jsx)(n.p,{children:"清除所有监听"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"参数"})}),"\n",(0,s.jsx)(n.p,{children:"无"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"返回值"})}),"\n",(0,s.jsx)(n.p,{children:"无"}),"\n",(0,s.jsxs)(n.h4,{id:"ononce",children:[(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#ononce",children:"#"}),"onOnce"]}),"\n",(0,s.jsx)(n.p,{children:"只监听一次"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"参数"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{align:"center",children:"必填"}),(0,s.jsx)(n.th,{children:"参数名"}),(0,s.jsx)(n.th,{children:"说明"}),(0,s.jsx)(n.th,{children:"类型"}),(0,s.jsx)(n.th,{children:"默认值"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{align:"center",children:"*"}),(0,s.jsx)(n.td,{children:"callback"}),(0,s.jsx)(n.td,{children:"回调函数"}),(0,s.jsx)(n.td,{children:"(data: any) => void"}),(0,s.jsx)(n.td,{children:"-"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"返回值"})}),"\n",(0,s.jsx)(n.p,{children:"无"})]})}function h(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,d.ah)(),e.components);return n?(0,s.jsx)(n,Object.assign({},e,{children:(0,s.jsx)(i,e)})):i(e)}let t=h;h.__RSPRESS_PAGE_META={},h.__RSPRESS_PAGE_META["packages%2Fbase%2Ftools%2FcreateWorkerFunc.md"]={toc:[{id:"createworkerfunc---function",text:"createWorkerFunc - (function)",depth:2},{id:"参数",text:"参数",depth:3},{id:"返回值",text:"返回值",depth:3},{id:"run",text:"run",depth:4},{id:"dispose",text:"dispose",depth:4},{id:"on",text:"on",depth:4},{id:"remove",text:"remove",depth:4},{id:"clearon",text:"clearOn",depth:4},{id:"ononce",text:"onOnce",depth:4}],title:"创建 Worker 函数",frontmatter:{}}},2287:function(e,n,r){r.d(n,{Z:function(){return t}});var s=r(2676),d=r(5271),c=r(2117);r(4986);let i={"zh-CN":e=>`预计阅读时间: ${e.minutes>=1?`${Math.ceil(e.minutes)} 分钟`:"小于 1 分钟"}`,"en-US":e=>`Estimated reading time: ${e.minutes>=1?`${Math.ceil(e.minutes)} minutes`:"less than 1 minute"}`};function h(e,n,r){let s=Object.keys(i).includes(n)?n:r;return i[s](e)}let t=e=>{let{defaultLocale:n="en-US"}=e,r=(0,c.Vi)().page.readingTimeData,i=(0,c.Jr)(),t=(0,c.e7)(),[l,x]=(0,d.useState)(h(r,i,n));return(0,d.useEffect)(()=>{x(h(r,i,n))},[i,r]),(0,s.jsx)("span",{"data-dark":String(t),className:"rp-reading-time",children:l})}}}]);