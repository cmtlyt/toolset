"use strict";(self.webpackChunk_cmtlyt_toolset=self.webpackChunk_cmtlyt_toolset||[]).push([["8535"],{6143:function(e,n,s){s.r(n),s.d(n,{default:function(){return d}});var r=s(2676),t=s(453),c=s(2287);function a(e){let n=Object.assign({h1:"h1",a:"a",details:"details",summary:"summary",div:"div",pre:"pre",code:"code",h2:"h2",p:"p",strong:"strong",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td"},(0,t.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.h1,{id:"cmtlytjson-schema",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#cmtlytjson-schema",children:"#"}),"@cmtlyt/json-schema"]}),"\n",(0,r.jsx)(c.Z,{defaultLocale:"zh-CN"}),"\n",(0,r.jsxs)(n.details,{className:"rspress-directive details",children:[(0,r.jsx)(n.summary,{className:"rspress-directive-title",children:"类型补充"}),(0,r.jsx)(n.div,{className:"rspress-directive-content",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",meta:"",children:"interface Schema {\n  type: string;\n  description: string;\n  properties?: Record<string, Schema>;\n  required?: string[];\n  items?: Schema;\n  maxLength?: number;\n  minLength?: number;\n}\ntype TObject<T> = Record<string | number | symbol, T>;\ntype MockHandlerMap = {\n  string: () => string;\n  number: () => number;\n  boolean: () => boolean;\n  array: () => any[];\n  object: () => {};\n};\n"})})})]}),"\n",(0,r.jsxs)(n.h2,{id:"jsonschemagenerator",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#jsonschemagenerator",children:"#"}),"jsonSchemaGenerator"]}),"\n",(0,r.jsx)(n.p,{children:"json schema 生成器"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"类型声明"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",meta:"",children:"function jsonSchemaGenerator(data: TObject<any>): Schema;\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"参数"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{align:"center",children:"必填"}),(0,r.jsx)(n.th,{children:"参数"}),(0,r.jsx)(n.th,{children:"说明"}),(0,r.jsx)(n.th,{children:"类型"}),(0,r.jsx)(n.th,{children:"默认值"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{align:"center",children:"*"}),(0,r.jsx)(n.td,{children:"data"}),(0,r.jsx)(n.td,{children:"数据"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"TObject<any>"})}),(0,r.jsx)(n.td,{})]})})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"返回值"}),": ",(0,r.jsx)(n.code,{children:"Schema"})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"示例"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",meta:"",children:"import { jsonSchemaGenerator } from '@cmtlyt/json-schema';\n\njsonSchemaGenerator({\n  name: 'John',\n  age: 30,\n  address: {\n    city: 'New York',\n    street: 'Wall Street',\n  },\n});\n/*\n{\n  type: 'object',\n  description: '',\n  required: ['name', 'age', 'address'],\n  properties: {\n    name: {\n      type: 'string',\n      description: '',\n    },\n    age: {\n      type: 'number',\n      description: '',\n    },\n    address: {\n      type: 'object',\n      description: '',\n      required: ['city', 'street'],\n      properties: {\n        city: {\n          type: 'string',\n          description: '',\n        },\n        street: {\n          type: 'string',\n          description: '',\n        },\n      },\n    },\n  },\n}\n*/\n"})}),"\n",(0,r.jsxs)(n.h2,{id:"verifybyschema",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#verifybyschema",children:"#"}),"verifyBySchema"]}),"\n",(0,r.jsx)(n.p,{children:"验证数据是否符合 schema"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"类型声明"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",meta:"",children:"const verifyBySchema: (\n  schema: Schema,\n  data: TObject<any>,\n) => Promise<[boolean, { path: string; message: string }[] | null]>;\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"参数"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{align:"center",children:"必填"}),(0,r.jsx)(n.th,{children:"参数"}),(0,r.jsx)(n.th,{children:"说明"}),(0,r.jsx)(n.th,{children:"类型"}),(0,r.jsx)(n.th,{children:"默认值"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{align:"center",children:"*"}),(0,r.jsx)(n.td,{children:"schema"}),(0,r.jsx)(n.td,{children:"schema"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Schema"})}),(0,r.jsx)(n.td,{})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{align:"center",children:"*"}),(0,r.jsx)(n.td,{children:"data"}),(0,r.jsx)(n.td,{children:"数据"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"TObject<any>"})}),(0,r.jsx)(n.td,{})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"返回值"}),": ",(0,r.jsx)(n.code,{children:"Promise<[boolean, { path: string; message: string }[] | null]>"})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"示例"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",meta:"",children:"import { verifyBySchema } from '@cmtlyt/json-schema';\n\nverifyBySchema(\n  {\n    type: 'object',\n    properties: {\n      name: {\n        type: 'string',\n      },\n      age: {\n        type: 'number',\n      },\n    },\n  },\n  {\n    name: 'John',\n    age: 30,\n  },\n);\n/*\n[ true, null ]\n*/\n\nverifyBySchema(\n  {\n    type: 'object',\n    properties: {\n      name: {\n        type: 'string',\n      },\n      age: {\n        type: 'number',\n      },\n    },\n  },\n  {\n    name: 123,\n    age: '30',\n  },\n);\n/*\n[ false, [\n  {\n    path: '/name',\n    message: 'Expected type string but got number',\n  },\n  {\n    path: '/age',\n    message: 'Expected type number but got string',\n  },\n] ]\n"})}),"\n",(0,r.jsxs)(n.h2,{id:"mockfromschema",children:[(0,r.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#mockfromschema",children:"#"}),"mockFromSchema"]}),"\n",(0,r.jsx)(n.p,{children:"根据 schema 生成 mock 数据"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"类型声明"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",meta:"",children:"function mockFromSchema(schema: Schema, handlerMap?: Partial<MockHandlerMap>): any;\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"参数"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{align:"center",children:"必填"}),(0,r.jsx)(n.th,{children:"参数"}),(0,r.jsx)(n.th,{children:"说明"}),(0,r.jsx)(n.th,{children:"类型"}),(0,r.jsx)(n.th,{children:"默认值"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{align:"center",children:"*"}),(0,r.jsx)(n.td,{children:"schema"}),(0,r.jsx)(n.td,{children:"schema"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Schema"})}),(0,r.jsx)(n.td,{})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{align:"center"}),(0,r.jsx)(n.td,{children:"handlerMap"}),(0,r.jsx)(n.td,{children:"类型处理器"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Partial<MockHandlerMap>"})}),(0,r.jsx)(n.td,{})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"返回值"}),": ",(0,r.jsx)(n.code,{children:"any"})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"示例"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",meta:"",children:"import { mockFromSchema } from '@cmtlyt/json-schema';\n\nmockFromSchema({\n  type: 'object',\n  properties: {\n    name: {\n      type: 'string',\n    },\n    age: {\n      type: 'number',\n    },\n  },\n});\n/*\n{\n  name: '',\n  age: 0,\n}\n*/\n\nmockFromSchema(\n  {\n    type: 'object',\n    properties: {\n      name: {\n        type: 'string',\n      },\n      age: {\n        type: 'number',\n      },\n    },\n  },\n  {\n    string: () => 'mock',\n  },\n);\n/*\n{\n  name: 'mock',\n  age: 0,\n}\n*/\n"})})]})}function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,t.ah)(),e.components);return n?(0,r.jsx)(n,Object.assign({},e,{children:(0,r.jsx)(a,e)})):a(e)}let d=i;i.__RSPRESS_PAGE_META={},i.__RSPRESS_PAGE_META["packages%2FjsonSchema%2Findex.md"]={toc:[{id:"jsonschemagenerator",text:"jsonSchemaGenerator",depth:2},{id:"verifybyschema",text:"verifyBySchema",depth:2},{id:"mockfromschema",text:"mockFromSchema",depth:2}],title:"@cmtlyt/json-schema",frontmatter:{}}},2287:function(e,n,s){s.d(n,{Z:function(){return d}});var r=s(2676),t=s(5271),c=s(2117);s(4986);let a={"zh-CN":e=>`预计阅读时间: ${e.minutes>=1?`${Math.ceil(e.minutes)} 分钟`:"小于 1 分钟"}`,"en-US":e=>`Estimated reading time: ${e.minutes>=1?`${Math.ceil(e.minutes)} minutes`:"less than 1 minute"}`};function i(e,n,s){let r=Object.keys(a).includes(n)?n:s;return a[r](e)}let d=e=>{let{defaultLocale:n="en-US"}=e,s=(0,c.Vi)().page.readingTimeData,a=(0,c.Jr)(),d=(0,c.e7)(),[h,l]=(0,t.useState)(i(s,a,n));return(0,t.useEffect)(()=>{l(i(s,a,n))},[a,s]),(0,r.jsx)("span",{"data-dark":String(d),className:"rp-reading-time",children:h})}}}]);