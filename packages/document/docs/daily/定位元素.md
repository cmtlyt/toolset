# 定位元素

## 定位类型

| 类型     | 描述                                                         |
| -------- | ------------------------------------------------------------ |
| static   | 默认值，元素正常在文档流中，会忽略 top、bottom、left、right 或者 z-index等属性 |
| relative | 元素可以使用的顶部，底部，左侧和右侧属性定位                 |
| absolute | 寻找 最近有定位(非 static ) 通过 top、bottom等属性进行定位   |
| fixed    | 相对于**可视窗口**固定定位                                   |
| sticky   | 相对定位和固定定位相结合，如果元素并不脱离文档流，仍然保留元素原本在文档流中的位置；当元素在容器中被滚动超过指定的偏移值时，元素在容器内固定在指定位置；需要指定 top, right, bottom 或 left 四个阈值其中之一，才可使粘性定位生效，反之与**相对定位**相同 |

### 定位失效

**fixed失效**

> 定位的基准元素发生改变，此时任何非 none 的 transform 值都会导致一个堆叠上下文和包含块的创建。

 **创建堆叠上下文的方式(参考自 [MDN](https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Positioning/Understanding_z_index/The_stacking_context)):**

- 根元素 (HTML)
- z-index 值不为 "auto"的 绝对/相对定位
- 一个 z-index 值不为 "auto"的 flex 项目 (flex item), 即: 父元素 display: flex|inline-flex
- opacity 属性值小于 1 的元素（参考 the specification for opacity）
- transform 属性值不为 "none"的元素
- mix-blend-mode 属性值不为 "normal"的元素
- filter值不为 "none" 的元素
- perspective值不为 "none" 的元素,
- isolation 属性被设置为 "isolate"的元素
- position: fixed
- 在 will-change 中指定了任意 CSS 属性, 即便你没有直接指定这些属性的值
- -webkit-overflow-scrolling 属性被设置 "touch"的元素
- backdrop-filter 值不为 "none" 的元素

**解决办法**

- 添加` transform: unset`





### 脱离文档流

**文档流** 指窗体元素自上而下一行一行，并在每行中从左至右以此排放元素，也叫普通流动。

**脱离文档流** 指 元素不再在文档流中占据空间，而是处于浮动状态

方式：

1. float
2. absolute
3. fixed



## 元素居中方式

### 水平居中

分为 行内元素居中 和 块级元素居中

1. 行内元素：在父级元素的样式设置 `text-align:center;`

2. 块级元素：

   1. 固定宽度：目标元素样式设置 `margin:0 auto;`

   2. 不定宽度：

      1. 设置 table：

         ```css
          .center{
               display:table;
               margin:0 auto;
           }
         ```

      2. 设置 inline-block：

         ```html
         <div class="container">
             <div class="item">1</div>
             <div class="item">2</div>
         </div>
         <style>
             .container{
                 text-align:center;
             }
             .item{
                 display:inline-block;
             }
         </style>
         
         ```

      3. 设置 flex 布局：

         ```html
         <div class="container">
             <div class="item">1</div>
             <div class="item">2</div>
         </div>
         <style>
             .container{
                 display:flex;
                 justify-content:center;
             }
         </style>
         
         ```

      4. 设置 left + transform：

         ```css
         <div class="container">
             <div class="item">我是目标元素</div>
         </div>
         <style>
             .container {
                 position: relative;
                 width: 500px;
                 height: 300px;
             }
             
             .item {
                 position: absolute;
                 height: 100px;
                 left: 50%;
                 transform: translateX(-50%);
             }
         </style
         ```

         > 如果目标元素有宽度还可以使用 margin-left: -(目标元素宽度)px 代替 transform，或者使用 margin: auto

### 垂直居中

1. 行内元素：

   1. 单行：将父元素的**行高**设置成高度一样： `line-height = height`
   2. 多行：给父元素设置`display: table-cell`和`vertical-align: middle`

2. 块级元素：

   1. 设置 flex 布局

      ```html
      <div class="container">
          <div class="item">1</div>
          <div class="item">2</div>
      </div>
      <style>
          .container{
              display:flex;
             	align-items:center;
          }
      </style>
      
      ```

   2. position + top / bottom

      ```html
      <div class="container">
          <div class="item">我是目标元素</div>
      </div>
      <style>
          .container {
              position: relative;
              width: 500px;
              height: 300px;
          }
          
          .item {
              position: absolute;
              height: 100px;
              line-height: 100px;
              bottom: 0;
              top: 0;
              margin: auto;
              transform: translateX(-50%);
          }
          .item {
              position: absolute;
              top: 50%;
              transform: translate(0, -50%);
              line-height: 100px;
          }
      </style>
      ```

      > transform中translate偏移的百分比就是相对于元素自身的尺寸而言的。

### 水平垂直居中

1. 绝对定位 + margin

   ```css
   .container{
       position: absolute;
       left: 0;
       top: 0;
       bottom: 0;
       right: 0;
       margin: auto;
   }
   ```

2. 绝对定位 + 负margin(需要知道 宽高)

   ```css
   .container{
       width: 200px;
       height: 200px;
       
       position: absolute;
       left: 50%;
       top: 50%;
       margin-left:-100px;
       margin-top:-100px;
   }
   ```

3. 绝对定位 + transform

   ```css
   .container{
       width: 200px;
       height: 200px;
   
       position:absolute;
       left:50%;
       top:50%;
       transform: translate(-50%,-50%); 
   }
   ```

4. flex 布局

   ```css
   .container{
       height:600px;  
   
       display:flex;
       justify-content:center;  
       align-items:center;
   }
   ```

5.  table-cell

   ```css
   .container{
       display:table-cell;
       text-align:center;
       vertical-align: middle;
   }
   ```

   