<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="Rspress v1.25.2"><link rel="manifest"href="/toolset/manifest.json"><title data-rh="true">性能优化指标 - CL文档</title><meta data-rh="true" name="description" content="@cmtlyt 生态文档"/><script>{const e=localStorage.getItem("rspress-theme-appearance"),t=window.matchMedia("(prefers-color-scheme: dark)").matches,a=e&&"auto"!==e?"dark"===e:t;document.documentElement.classList.toggle("dark",a),document.documentElement.style.colorScheme=a?"dark":"light"}</script><link rel="icon" href="/toolset/logo.png"><script defer="defer" src="/toolset/static/js/styles.0f08d629.js"></script><script defer="defer" src="/toolset/static/js/lib-polyfill.94a83174.js"></script><script defer="defer" src="/toolset/static/js/lib-lodash.fbd413e7.js"></script><script defer="defer" src="/toolset/static/js/lib-react.7a05ec4d.js"></script><script defer="defer" src="/toolset/static/js/lib-router.2269d509.js"></script><script defer="defer" src="/toolset/static/js/index.dd5ea644.js"></script><link href="/toolset/static/css/styles.a4f79d4a.css" rel="stylesheet"><link rel="preload" href="https:/cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.43.0/min/vs/loader.js" as="script"><link rel="preload" href="https:/cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.43.0/min/vs/editor/editor.main.js" as="script"></head><body ><div id="root"><div><div class="navContainer_f6cde rspress-nav px-6 " style="position:sticky"><div class="container_f6cde flex justify-between items-center h-full"><div class="navBarTitle_f6cde"><a href="/toolset/" class="flex items-center w-full h-full text-base font-semibold transition-opacity duration-300 hover:opacity-60"><img src="/toolset/utils-rabbit.png" alt="logo" id="logo" class="mr-4 rspress-logo"/><span>@cmtlyt</span></a></div><div class="flex flex-1 justify-end items-center"><div class="rightNav_f6cde"><div class="flex sm:flex-1 items-center sm:pl-4 sm:pr-2"><div class="rspress-nav-search-button navSearchButton_6e282"><button><svg width="18" height="18" viewBox="0 0 32 32"><path fill="var(--rp-c-gray)" d="m29 27.586-7.552-7.552a11.018 11.018 0 1 0-1.414 1.414L27.586 29ZM4 13a9 9 0 1 1 9 9 9.01 9.01 0 0 1-9-9Z"></path></svg><p class="searchWord_6e282">搜索</p><div style="opacity:0"><span></span><span>K</span></div></button></div><div class="mobileNavSearchButton_6e282"><svg width="24" height="24" viewBox="0 0 32 32"><path fill="var(--rp-c-gray)" d="m29 27.586-7.552-7.552a11.018 11.018 0 1 0-1.414 1.414L27.586 29ZM4 13a9 9 0 1 1 9 9 9.01 9.01 0 0 1-9-9Z"></path></svg></div></div><div class="rspress-nav-menu menu h-14"><a class="link_03735  cursor-pointer" target="" href="/toolset/guides/index"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">介绍</div></a><a class="link_03735  cursor-pointer" target="" href="/toolset/wiki/index"><div class="rspress-nav-menu-item singleItem_f6cde activeItem_f6cde text-sm font-medium mx-1.5 px-3 py-2 flex items-center">百科</div></a><a class="link_03735  cursor-pointer" target="" href="/toolset/daily/index"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">日常</div></a><div class="mx-3 last:mr-0"><div class="relative flex-center h-14"><button class="rspress-nav-menu-group-button flex-center items-center font-medium text-sm text-text-1 hover:text-text-2 transition-colors duration-200"><a class="link_03735  cursor-pointer" target="" href="/toolset/packages/index"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">工具包<svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M16 22 6 12l1.4-1.4 8.6 8.6 8.6-8.6L26 12z"></path></svg></div></a></button><div class="rspress-nav-menu-group-content absolute mx-0.8 transition-opacity duration-300" style="opacity:0;visibility:hidden;right:0;top:52px"><div class="p-3 pr-2 w-full h-full max-h-100vh whitespace-nowrap" style="box-shadow:var(--rp-shadow-3);z-index:100;border:1px solid var(--rp-c-divider-light);border-radius:var(--rp-radius-large);background:var(--rp-c-bg)"><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/toolset/packages/base"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>@cmtlyt/base</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/toolset/packages/jsonSchema"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>@cmtlyt/json-schema</span></div></div></a></div></div><div><div class="font-medium my-1"><a class="link_03735  cursor-pointer" target="" href="/toolset/packages/logger"><div class="rounded-2xl hover:bg-mute" style="padding:0.4rem 1.5rem 0.4rem 0.75rem"><div class="flex"><span>@cmtlyt/logger</span></div></div></a></div></div></div></div></div></div></div><div class="flex-center flex-row"><div class="mx-2"><div class="md:mr-2 rspress-nav-appearance"><div class="p-1 border border-solid border-gray-300 text-gray-400  cursor-pointer rounded-md hover:border-gray-600 hover:text-gray-600 dark:hover:border-gray-200 dark:hover:text-gray-200 transition-all duration-300 w-7 h-7"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="0 0 24 24" class="dark:hidden" width="18" height="18" fill="currentColor"><path d="M12 18c-3.3 0-6-2.7-6-6s2.7-6 6-6 6 2.7 6 6-2.7 6-6 6zm0-10c-2.2 0-4 1.8-4 4s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4zM12 4c-.6 0-1-.4-1-1V1c0-.6.4-1 1-1s1 .4 1 1v2c0 .6-.4 1-1 1zM12 24c-.6 0-1-.4-1-1v-2c0-.6.4-1 1-1s1 .4 1 1v2c0 .6-.4 1-1 1zM5.6 6.6c-.3 0-.5-.1-.7-.3L3.5 4.9c-.4-.4-.4-1 0-1.4s1-.4 1.4 0l1.4 1.4c.4.4.4 1 0 1.4-.1.2-.4.3-.7.3zM19.8 20.8c-.3 0-.5-.1-.7-.3l-1.4-1.4c-.4-.4-.4-1 0-1.4s1-.4 1.4 0l1.4 1.4c.4.4.4 1 0 1.4-.2.2-.5.3-.7.3zM3 13H1c-.6 0-1-.4-1-1s.4-1 1-1h2c.6 0 1 .4 1 1s-.4 1-1 1zM23 13h-2c-.6 0-1-.4-1-1s.4-1 1-1h2c.6 0 1 .4 1 1s-.4 1-1 1zM4.2 20.8c-.3 0-.5-.1-.7-.3-.4-.4-.4-1 0-1.4l1.4-1.4c.4-.4 1-.4 1.4 0s.4 1 0 1.4l-1.4 1.4c-.2.2-.4.3-.7.3zM18.4 6.6c-.3 0-.5-.1-.7-.3-.4-.4-.4-1 0-1.4l1.4-1.4c.4-.4 1-.4 1.4 0s.4 1 0 1.4l-1.4 1.4c-.2.2-.5.3-.7.3z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="0 0 24 24" class="hidden dark:block" width="18" height="18" fill="currentColor"><path d="M12.1 22h-.9c-5.5-.5-9.5-5.4-9-10.9.4-4.8 4.2-8.6 9-9 .4 0 .8.2 1 .5.2.3.2.8-.1 1.1-2 2.7-1.4 6.4 1.3 8.4 2.1 1.6 5 1.6 7.1 0 .3-.2.7-.3 1.1-.1.3.2.5.6.5 1-.2 2.7-1.5 5.1-3.6 6.8-1.9 1.4-4.1 2.2-6.4 2.2zM9.3 4.4c-2.9 1-5 3.6-5.2 6.8-.4 4.4 2.8 8.3 7.2 8.7 2.1.2 4.2-.4 5.8-1.8 1.1-.9 1.9-2.1 2.4-3.4-2.5.9-5.3.5-7.5-1.1-2.8-2.2-3.9-5.9-2.7-9.2z"></path></svg></div></div></div><div class="social-links menu-item_93d67 flex-center relative"><div class="flex-center h-full gap-x-4 transition-colors duration-300 md:mr-2"><a href="https://github.com/cmtlyt/toolset" target="_blank" rel="noopener noreferrer" class="social-links"><div class="social-links-icon_93d67"><svg role="img" viewBox="0 0 24 24" width="24" height="24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></div></a><a href="https://juejin.cn/user/1689315510854334/posts" target="_blank" rel="noopener noreferrer" class="social-links"><div class="social-links-icon_93d67"><svg class="icon" viewBox="0 0 1024 1024" version="1.1" width="24" height="24" xmlns="http://www.w3.org/2000/svg" data-spm-anchor-id="a313x.7781069.0.i5"><path d="M465.189 161.792c-22.967 18.14-44.325 35.109-47.397 37.742l-5.851 4.68 10.971 8.632c5.998 4.827 11.85 9.508 13.02 10.532 1.17 1.024 17.993 14.336 37.156 29.696l34.962 27.795 5.267-3.95c2.925-2.194 23.259-18.432 45.348-35.986 21.943-17.555 41.253-32.768 42.716-33.646 1.609-1.024 2.779-2.194 2.779-2.78 0-0.438-9.655-8.63-21.504-17.846-11.995-9.363-22.674-17.847-23.845-18.871-15.945-13.02-49.737-39.059-50.76-39.059-0.586 0.147-19.896 14.922-42.862 33.061z m233.325 180.37C507.465 493.275 508.928 492.105 505.417 489.911c-3.072-1.902-11.556-8.485-64.073-50.03-9.07-7.168-18.578-14.775-21.358-16.823-2.78-2.194-8.777-6.875-13.312-10.532-4.68-3.657-10.679-8.339-13.312-10.533-13.165-10.24-71.095-56.027-102.107-80.457-5.852-4.681-11.41-8.485-12.142-8.485-0.731 0-10.971 7.754-22.674 17.116-11.703 9.508-22.674 18.286-24.284 19.456-1.755 1.17-5.12 3.95-7.46 6.144-2.34 2.34-4.828 4.096-5.413 4.096-3.072 0-0.731 3.072 6.437 8.777 4.096 3.218 8.777 6.875 10.094 8.046 1.316 1.024 10.24 8.045 19.748 15.506s23.26 18.286 30.428 23.99c19.31 15.215 31.89 25.308 127.853 101.084 47.836 37.742 88.796 69.779 90.844 71.095 3.657 2.487 3.95 2.487 7.46-0.292a1041.42 1041.42 0 0 0 16.092-12.727c6.875-5.413 14.775-11.703 17.554-13.897 30.135-23.699 80.018-63.05 81.774-64.512 1.17-1.024 12.434-9.802 24.868-19.603s37.888-29.696 56.32-44.324c18.579-14.629 46.227-36.425 61.733-48.567 15.506-12.142 27.794-22.528 27.502-23.26-0.878-1.17-57.637-47.104-59.978-48.274-0.731-0.439-18.578 12.727-39.497 29.257z" data-spm-anchor-id="a313x.7781069.0.i2"></path><path d="M57.93 489.326c-15.215 12.288-28.527 23.405-29.697 24.576-2.34 2.194-5.412-0.44 80.018 66.852 33.207 26.185 32.622 25.747 57.637 45.495 10.386 8.192 36.279 28.672 57.783 45.495 38.18 30.135 44.91 35.401 52.663 41.545 2.048 1.756 22.967 18.14 46.372 36.572 23.26 18.432 74.167 58.514 112.933 89.088 38.912 30.573 71.095 55.734 71.826 56.027 0.732 0.293 7.46-4.389 14.921-10.386 21.797-16.97 90.259-70.949 101.523-79.872 5.705-4.535 12.873-10.24 15.945-12.58 3.072-2.488 6.436-5.12 7.314-5.852 0.878-0.878 11.85-9.509 24.283-19.31 20.773-16.091 59.1-46.226 64.366-50.615 1.17-1.024 5.12-4.096 8.777-6.875 3.657-2.78 7.9-6.29 9.509-7.607 1.609-1.317 14.775-11.703 29.257-23.113 29.11-22.82 42.277-33.207 88.503-69.632 17.262-13.605 32.475-25.454 33.646-26.478 2.486-2.048 31.451-24.869 44.617-35.255 4.827-3.657 9.07-7.168 9.508-7.607 0.44-0.585 5.998-4.827 12.435-9.8 6.436-4.828 13.165-10.24 15.067-11.85l3.365-2.926-9.948-7.753c-5.412-4.388-10.24-8.192-10.679-8.63-1.17-1.317-22.381-18.433-30.135-24.284-3.95-3.072-7.314-5.998-7.606-6.73-1.317-3.071-6.73 0.147-29.258 17.994-13.458 10.532-25.746 20.187-27.355 21.504-1.61 1.463-10.533 8.338-19.749 15.652-9.216 7.168-17.115 13.459-17.554 13.898-0.439 0.438-6.583 5.412-13.897 10.971-7.168 5.559-15.214 11.703-17.7 13.75-4.974 4.097-5.413 4.39-20.334 16.239-5.56 4.388-11.264 8.777-12.435 9.8-1.17 1.025-20.333 16.092-42.422 33.354-22.09 17.408-41.546 32.768-43.155 34.084-1.609 1.463-14.482 11.557-28.525 22.528s-40.814 32.037-59.539 46.812c-18.578 14.775-42.276 33.353-52.516 41.399s-23.26 18.285-28.965 22.82l-10.386 8.339-4.389-3.072c-2.34-1.756-4.68-3.511-5.12-3.95-0.439-0.439-4.973-4.096-10.24-8.046-11.849-9.216-14.482-11.264-16.676-13.166-0.878-0.877-4.243-3.51-7.46-5.851-3.22-2.487-6.145-4.681-6.584-5.12-0.439-0.439-6.875-5.705-14.482-11.703-7.607-5.851-14.921-11.556-16.091-12.58-1.317-1.17-17.116-13.605-35.255-27.795-17.993-14.19-35.109-27.648-38.035-29.842-5.705-4.681-33.499-26.624-125.074-98.743-34.523-27.209-72.704-57.344-84.846-66.852-49.737-39.498-55.15-43.594-56.905-43.447-0.877 0-14.043 10.24-29.257 22.528z" data-spm-anchor-id="a313x.7781069.0.i3"></path></svg></div></a><div class="social-links-icon_93d67 cursor-pointer relative mx-3"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" class="iconify iconify--ri" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" width="24" height="24"><path fill="currentColor" d="M18.574 13.711a.91.91 0 0 0 .898-.898c0-.498-.399-.898-.898-.898s-.898.4-.898.898c0 .5.4.898.898.898zm-4.425 0a.91.91 0 0 0 .898-.898c0-.498-.4-.898-.898-.898c-.5 0-.898.4-.898.898c0 .5.399.898.898.898zm6.567 5.04a.347.347 0 0 0-.172.37c0 .048 0 .097.025.147c.098.417.294 1.081.294 1.106c0 .073.025.122.025.172a.22.22 0 0 1-.221.22c-.05 0-.074-.024-.123-.048l-1.449-.836a.799.799 0 0 0-.344-.098c-.073 0-.147 0-.196.024c-.688.197-1.4.295-2.161.295c-3.66 0-6.607-2.457-6.607-5.505c0-3.047 2.947-5.505 6.607-5.505c3.659 0 6.606 2.458 6.606 5.505c0 1.647-.884 3.146-2.284 4.154zM16.673 8.099a9.105 9.105 0 0 0-.28-.005c-4.174 0-7.606 2.86-7.606 6.505c0 .554.08 1.09.228 1.6h-.089a9.963 9.963 0 0 1-2.584-.368c-.074-.025-.148-.025-.222-.025a.832.832 0 0 0-.418.123l-1.748 1.005c-.05.025-.099.05-.148.05a.273.273 0 0 1-.27-.27c0-.074.024-.123.049-.197c.024-.024.246-.834.369-1.324c0-.05.024-.123.024-.172a.556.556 0 0 0-.221-.442C2.058 13.376 1 11.586 1 9.598C1 5.945 4.57 3 8.95 3c3.765 0 6.93 2.169 7.723 5.098zm-5.154.418c.573 0 1.026-.477 1.026-1.026c0-.573-.453-1.026-1.026-1.026s-1.026.453-1.026 1.026s.453 1.026 1.026 1.026zm-5.26 0c.573 0 1.027-.477 1.027-1.026c0-.573-.454-1.026-1.027-1.026c-.572 0-1.026.453-1.026 1.026s.454 1.026 1.026 1.026z"></path></svg></div></div></div></div></div><div class="mobileNavMenu_f6cde"><div class="navScreen_457e8 " id="navScreen"><div class="container_457e8"><div class="navMenu_457e8"><div class="navMenuItem_457e8 w-full"><a class="link_03735  cursor-pointer" target="" href="/toolset/guides/index"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">介绍</div></a></div><div class="navMenuItem_457e8 w-full"><a class="link_03735  cursor-pointer" target="" href="/toolset/wiki/index"><div class="rspress-nav-menu-item singleItem_f6cde activeItem_f6cde text-sm font-medium mx-1.5 px-3 py-2 flex items-center">百科</div></a></div><div class="navMenuItem_457e8 w-full"><a class="link_03735  cursor-pointer" target="" href="/toolset/daily/index"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">日常</div></a></div><div class="navMenuItem_457e8 w-full"><a class="link_03735  cursor-pointer" target="" href="/toolset/packages/index"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">工具包</div></a></div></div><div class="flex-center flex-col gap-2"><div class="mt-2 navAppearance_457e8 flex justify-center"></div><div class="social-links menu-item_93d67 flex-center relative"><div class="flex-center h-full gap-x-4 transition-colors duration-300 md:mr-2"><a href="https://github.com/cmtlyt/toolset" target="_blank" rel="noopener noreferrer" class="social-links"><div class="social-links-icon_93d67"><svg role="img" viewBox="0 0 24 24" width="24" height="24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></div></a><a href="https://juejin.cn/user/1689315510854334/posts" target="_blank" rel="noopener noreferrer" class="social-links"><div class="social-links-icon_93d67"><svg class="icon" viewBox="0 0 1024 1024" version="1.1" width="24" height="24" xmlns="http://www.w3.org/2000/svg" data-spm-anchor-id="a313x.7781069.0.i5"><path d="M465.189 161.792c-22.967 18.14-44.325 35.109-47.397 37.742l-5.851 4.68 10.971 8.632c5.998 4.827 11.85 9.508 13.02 10.532 1.17 1.024 17.993 14.336 37.156 29.696l34.962 27.795 5.267-3.95c2.925-2.194 23.259-18.432 45.348-35.986 21.943-17.555 41.253-32.768 42.716-33.646 1.609-1.024 2.779-2.194 2.779-2.78 0-0.438-9.655-8.63-21.504-17.846-11.995-9.363-22.674-17.847-23.845-18.871-15.945-13.02-49.737-39.059-50.76-39.059-0.586 0.147-19.896 14.922-42.862 33.061z m233.325 180.37C507.465 493.275 508.928 492.105 505.417 489.911c-3.072-1.902-11.556-8.485-64.073-50.03-9.07-7.168-18.578-14.775-21.358-16.823-2.78-2.194-8.777-6.875-13.312-10.532-4.68-3.657-10.679-8.339-13.312-10.533-13.165-10.24-71.095-56.027-102.107-80.457-5.852-4.681-11.41-8.485-12.142-8.485-0.731 0-10.971 7.754-22.674 17.116-11.703 9.508-22.674 18.286-24.284 19.456-1.755 1.17-5.12 3.95-7.46 6.144-2.34 2.34-4.828 4.096-5.413 4.096-3.072 0-0.731 3.072 6.437 8.777 4.096 3.218 8.777 6.875 10.094 8.046 1.316 1.024 10.24 8.045 19.748 15.506s23.26 18.286 30.428 23.99c19.31 15.215 31.89 25.308 127.853 101.084 47.836 37.742 88.796 69.779 90.844 71.095 3.657 2.487 3.95 2.487 7.46-0.292a1041.42 1041.42 0 0 0 16.092-12.727c6.875-5.413 14.775-11.703 17.554-13.897 30.135-23.699 80.018-63.05 81.774-64.512 1.17-1.024 12.434-9.802 24.868-19.603s37.888-29.696 56.32-44.324c18.579-14.629 46.227-36.425 61.733-48.567 15.506-12.142 27.794-22.528 27.502-23.26-0.878-1.17-57.637-47.104-59.978-48.274-0.731-0.439-18.578 12.727-39.497 29.257z" data-spm-anchor-id="a313x.7781069.0.i2"></path><path d="M57.93 489.326c-15.215 12.288-28.527 23.405-29.697 24.576-2.34 2.194-5.412-0.44 80.018 66.852 33.207 26.185 32.622 25.747 57.637 45.495 10.386 8.192 36.279 28.672 57.783 45.495 38.18 30.135 44.91 35.401 52.663 41.545 2.048 1.756 22.967 18.14 46.372 36.572 23.26 18.432 74.167 58.514 112.933 89.088 38.912 30.573 71.095 55.734 71.826 56.027 0.732 0.293 7.46-4.389 14.921-10.386 21.797-16.97 90.259-70.949 101.523-79.872 5.705-4.535 12.873-10.24 15.945-12.58 3.072-2.488 6.436-5.12 7.314-5.852 0.878-0.878 11.85-9.509 24.283-19.31 20.773-16.091 59.1-46.226 64.366-50.615 1.17-1.024 5.12-4.096 8.777-6.875 3.657-2.78 7.9-6.29 9.509-7.607 1.609-1.317 14.775-11.703 29.257-23.113 29.11-22.82 42.277-33.207 88.503-69.632 17.262-13.605 32.475-25.454 33.646-26.478 2.486-2.048 31.451-24.869 44.617-35.255 4.827-3.657 9.07-7.168 9.508-7.607 0.44-0.585 5.998-4.827 12.435-9.8 6.436-4.828 13.165-10.24 15.067-11.85l3.365-2.926-9.948-7.753c-5.412-4.388-10.24-8.192-10.679-8.63-1.17-1.317-22.381-18.433-30.135-24.284-3.95-3.072-7.314-5.998-7.606-6.73-1.317-3.071-6.73 0.147-29.258 17.994-13.458 10.532-25.746 20.187-27.355 21.504-1.61 1.463-10.533 8.338-19.749 15.652-9.216 7.168-17.115 13.459-17.554 13.898-0.439 0.438-6.583 5.412-13.897 10.971-7.168 5.559-15.214 11.703-17.7 13.75-4.974 4.097-5.413 4.39-20.334 16.239-5.56 4.388-11.264 8.777-12.435 9.8-1.17 1.025-20.333 16.092-42.422 33.354-22.09 17.408-41.546 32.768-43.155 34.084-1.609 1.463-14.482 11.557-28.525 22.528s-40.814 32.037-59.539 46.812c-18.578 14.775-42.276 33.353-52.516 41.399s-23.26 18.285-28.965 22.82l-10.386 8.339-4.389-3.072c-2.34-1.756-4.68-3.511-5.12-3.95-0.439-0.439-4.973-4.096-10.24-8.046-11.849-9.216-14.482-11.264-16.676-13.166-0.878-0.877-4.243-3.51-7.46-5.851-3.22-2.487-6.145-4.681-6.584-5.12-0.439-0.439-6.875-5.705-14.482-11.703-7.607-5.851-14.921-11.556-16.091-12.58-1.317-1.17-17.116-13.605-35.255-27.795-17.993-14.19-35.109-27.648-38.035-29.842-5.705-4.681-33.499-26.624-125.074-98.743-34.523-27.209-72.704-57.344-84.846-66.852-49.737-39.498-55.15-43.594-56.905-43.447-0.877 0-14.043 10.24-29.257 22.528z" data-spm-anchor-id="a313x.7781069.0.i3"></path></svg></div></a><div class="social-links-icon_93d67 cursor-pointer relative mx-3"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" class="iconify iconify--ri" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" width="24" height="24"><path fill="currentColor" d="M18.574 13.711a.91.91 0 0 0 .898-.898c0-.498-.399-.898-.898-.898s-.898.4-.898.898c0 .5.4.898.898.898zm-4.425 0a.91.91 0 0 0 .898-.898c0-.498-.4-.898-.898-.898c-.5 0-.898.4-.898.898c0 .5.399.898.898.898zm6.567 5.04a.347.347 0 0 0-.172.37c0 .048 0 .097.025.147c.098.417.294 1.081.294 1.106c0 .073.025.122.025.172a.22.22 0 0 1-.221.22c-.05 0-.074-.024-.123-.048l-1.449-.836a.799.799 0 0 0-.344-.098c-.073 0-.147 0-.196.024c-.688.197-1.4.295-2.161.295c-3.66 0-6.607-2.457-6.607-5.505c0-3.047 2.947-5.505 6.607-5.505c3.659 0 6.606 2.458 6.606 5.505c0 1.647-.884 3.146-2.284 4.154zM16.673 8.099a9.105 9.105 0 0 0-.28-.005c-4.174 0-7.606 2.86-7.606 6.505c0 .554.08 1.09.228 1.6h-.089a9.963 9.963 0 0 1-2.584-.368c-.074-.025-.148-.025-.222-.025a.832.832 0 0 0-.418.123l-1.748 1.005c-.05.025-.099.05-.148.05a.273.273 0 0 1-.27-.27c0-.074.024-.123.049-.197c.024-.024.246-.834.369-1.324c0-.05.024-.123.024-.172a.556.556 0 0 0-.221-.442C2.058 13.376 1 11.586 1 9.598C1 5.945 4.57 3 8.95 3c3.765 0 6.93 2.169 7.723 5.098zm-5.154.418c.573 0 1.026-.477 1.026-1.026c0-.573-.453-1.026-1.026-1.026s-1.026.453-1.026 1.026s.453 1.026 1.026 1.026zm-5.26 0c.573 0 1.027-.477 1.027-1.026c0-.573-.454-1.026-1.027-1.026c-.572 0-1.026.453-1.026 1.026s.454 1.026 1.026 1.026z"></path></svg></div></div></div></div></div></div><button aria-label="mobile hamburger" class=" navHamburger_e7b06 text-gray-500"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="currentColor"><circle cx="8" cy="16" r="2" fill="currentColor"></circle><circle cx="16" cy="16" r="2" fill="currentColor"></circle><circle cx="24" cy="16" r="2" fill="currentColor"></circle></svg></button></div></div></div></div><section><div class="docLayout_edeb4 pt-0"><div class="rspress-sidebar-menu"><button class="flex-center mr-auto"><div class="text-md mr-2"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M4 6h24v2H4zm0 18h24v2H4zm0-12h24v2H4zm0 6h24v2H4z"></path></svg></div><span class="text-sm">Menu</span></button><button class="flex-center ml-auto"><span class="text-sm">目录</span><div class="text-md mr-2" style="transform:rotate(0deg);transition:transform 0.2s ease-out;margin-top:2px"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M22 16 12 26l-1.4-1.4 8.6-8.6-8.6-8.6L12 6z"></path></svg></div></button></div><aside class="sidebar_71eca rspress-sidebar "><div class="navTitleMask_71eca"><div class="navBarTitle_f6cde"><a href="/toolset/" class="flex items-center w-full h-full text-base font-semibold transition-opacity duration-300 hover:opacity-60"><img src="/toolset/utils-rabbit.png" alt="logo" id="logo" class="mr-4 rspress-logo"/><span>@cmtlyt</span></a></div></div><div class="rspress-scrollbar sidebarContent_71eca"><nav class="pb-2"><a class="link_03735 menuLink_71eca cursor-pointer" target="" href="/toolset/wiki/index"><div class="menuItem_71eca mt-0.5 py-2 px-3 font-medium flex" style="font-size:14px;margin-left:0;border-radius:0 var(--rp-radius) var(--rp-radius) 0;padding-left:24px;font-weight:bold"><span>介绍</span></div></a><section class="mt-0.5 block" style="margin-left:0"><div class="flex justify-between items-center menuItem_71eca" style="border-radius:0 var(--rp-radius) var(--rp-radius) 0;cursor:pointer"><h2 class="py-2 px-3 text-sm font-medium flex" style="font-size:14px;padding-left:24px;font-weight:bold"><span class="flex-center">JavaScript 相关</span></h2><div class="collapseContainer_71eca p-2 rounded-xl"><div style="cursor:pointer;transition:transform 0.2s ease-out;transform:rotate(0deg)"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M22 16 12 26l-1.4-1.4 8.6-8.6-8.6-8.6L12 6z"></path></svg></div></div></div><div class="transition-all duration-300 ease-in-out" style="overflow:hidden;max-height:0"><div class="rspress-sidebar-group transition-opacity duration-500 ease-in-out" style="opacity:0;margin-left:12px"><div><a class="link_03735 menuLink_71eca cursor-pointer" target="" href="/toolset/wiki/javascript/arrayFunc"><div class="menuItem_71eca mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>数组方法</span></div></a></div><div><a class="link_03735 menuLink_71eca cursor-pointer" target="" href="/toolset/wiki/javascript/dataTransform"><div class="menuItem_71eca mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>数据类型转换</span></div></a></div><div><a class="link_03735 menuLink_71eca cursor-pointer" target="" href="/toolset/wiki/javascript/执行栈和执行上下文"><div class="menuItem_71eca mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>执行栈和执行上下文</span></div></a></div></div></div></section><section class="mt-0.5 block" style="margin-left:0"><div class="flex justify-between items-center menuItem_71eca" style="border-radius:0 var(--rp-radius) var(--rp-radius) 0;cursor:pointer"><h2 class="py-2 px-3 text-sm font-medium flex" style="font-size:14px;padding-left:24px;font-weight:bold"><span class="flex-center">面向对象设计原则</span></h2><div class="collapseContainer_71eca p-2 rounded-xl"><div style="cursor:pointer;transition:transform 0.2s ease-out;transform:rotate(0deg)"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M22 16 12 26l-1.4-1.4 8.6-8.6-8.6-8.6L12 6z"></path></svg></div></div></div><div class="transition-all duration-300 ease-in-out" style="overflow:hidden;max-height:0"><div class="rspress-sidebar-group transition-opacity duration-500 ease-in-out" style="opacity:0;margin-left:12px"><div><a class="link_03735 menuLink_71eca cursor-pointer" target="" href="/toolset/wiki/SOLID/index"><div class="menuItem_71eca mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>简介</span></div></a></div><div><a class="link_03735 menuLink_71eca cursor-pointer" target="" href="/toolset/wiki/SOLID/SRP"><div class="menuItem_71eca mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>单一职责原则</span></div></a></div><div><a class="link_03735 menuLink_71eca cursor-pointer" target="" href="/toolset/wiki/SOLID/OCP"><div class="menuItem_71eca mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>开闭原则</span></div></a></div><div><a class="link_03735 menuLink_71eca cursor-pointer" target="" href="/toolset/wiki/SOLID/LSP"><div class="menuItem_71eca mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>里氏替换原则</span></div></a></div><div><a class="link_03735 menuLink_71eca cursor-pointer" target="" href="/toolset/wiki/SOLID/ISP"><div class="menuItem_71eca mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>接口隔离原则</span></div></a></div><div><a class="link_03735 menuLink_71eca cursor-pointer" target="" href="/toolset/wiki/SOLID/DIP"><div class="menuItem_71eca mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>依赖倒置原则</span></div></a></div></div></div></section><section class="mt-0.5 block" style="margin-left:0"><div class="flex justify-between items-center menuItem_71eca" style="border-radius:0 var(--rp-radius) var(--rp-radius) 0;cursor:pointer"><h2 class="py-2 px-3 text-sm font-medium flex" style="font-size:14px;padding-left:24px;font-weight:bold"><span class="flex-center">软件开发流程相关</span></h2><div class="collapseContainer_71eca p-2 rounded-xl"><div style="cursor:pointer;transition:transform 0.2s ease-out;transform:rotate(0deg)"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M22 16 12 26l-1.4-1.4 8.6-8.6-8.6-8.6L12 6z"></path></svg></div></div></div><div class="transition-all duration-300 ease-in-out" style="overflow:hidden;max-height:0"><div class="rspress-sidebar-group transition-opacity duration-500 ease-in-out" style="opacity:0;margin-left:12px"><div><a class="link_03735 menuLink_71eca cursor-pointer" target="" href="/toolset/wiki/软件开发流程相关/index"><div class="menuItem_71eca mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>软件开发流程</span></div></a></div><div><a class="link_03735 menuLink_71eca cursor-pointer" target="" href="/toolset/wiki/软件开发流程相关/PRD"><div class="menuItem_71eca mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>产品需求文档</span></div></a></div><div><a class="link_03735 menuLink_71eca cursor-pointer" target="" href="/toolset/wiki/软件开发流程相关/TC"><div class="menuItem_71eca mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>测试用例</span></div></a></div></div></div></section><section class="mt-0.5 block" style="margin-left:0"><div class="flex justify-between items-center menuItem_71eca" style="border-radius:0 var(--rp-radius) var(--rp-radius) 0;cursor:pointer"><h2 class="py-2 px-3 text-sm font-medium flex" style="font-size:14px;padding-left:24px;font-weight:bold"><span class="flex-center">Elpis</span></h2><div class="collapseContainer_71eca p-2 rounded-xl"><div style="cursor:pointer;transition:transform 0.2s ease-out;transform:rotate(0deg)"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M22 16 12 26l-1.4-1.4 8.6-8.6-8.6-8.6L12 6z"></path></svg></div></div></div><div class="transition-all duration-300 ease-in-out" style="overflow:hidden;max-height:0"><div class="rspress-sidebar-group transition-opacity duration-500 ease-in-out" style="opacity:0;margin-left:12px"><div><a class="link_03735 menuLink_71eca cursor-pointer" target="" href="/toolset/wiki/elpis/elpis-core"><div class="menuItem_71eca mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>后端框架</span></div></a></div></div></div></section><section class="mt-0.5 block" style="margin-left:0"><div class="flex justify-between items-center menuItem_71eca" style="border-radius:0 var(--rp-radius) var(--rp-radius) 0;cursor:pointer"><h2 class="py-2 px-3 text-sm font-medium flex" style="font-size:14px;padding-left:24px;font-weight:bold"><span class="flex-center">性能优化</span></h2><div class="collapseContainer_71eca p-2 rounded-xl"><div style="cursor:pointer;transition:transform 0.2s ease-out;transform:rotate(0deg)"><svg width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M22 16 12 26l-1.4-1.4 8.6-8.6-8.6-8.6L12 6z"></path></svg></div></div></div><div class="transition-all duration-300 ease-in-out" style="overflow:hidden;max-height:0"><div class="rspress-sidebar-group transition-opacity duration-500 ease-in-out" style="opacity:0;margin-left:12px"><div><a class="link_03735 menuLink_71eca cursor-pointer" target="" href="/toolset/wiki/性能优化/web-vitals"><div class="menuItemActive_71eca mt-0.5 py-2 px-3 font-medium flex" style="font-size:13px;margin-left:18px;border-radius:0 var(--rp-radius) var(--rp-radius) 0"><span>性能优化指标</span></div></a></div></div></div></section><a class="link_03735 menuLink_71eca cursor-pointer" target="" href="/toolset/wiki/Turbo/index"><div class="menuItem_71eca mt-0.5 py-2 px-3 font-medium flex" style="font-size:14px;margin-left:0;border-radius:0 var(--rp-radius) var(--rp-radius) 0;padding-left:24px;font-weight:bold"><span>Turbo</span></div></a><a class="link_03735 menuLink_71eca cursor-pointer" target="" href="/toolset/wiki/CI_CD"><div class="menuItem_71eca mt-0.5 py-2 px-3 font-medium flex" style="font-size:14px;margin-left:0;border-radius:0 var(--rp-radius) var(--rp-radius) 0;padding-left:24px;font-weight:bold"><span>CI/CD</span></div></a><a class="link_03735 menuLink_71eca cursor-pointer" target="" href="/toolset/wiki/dataType"><div class="menuItem_71eca mt-0.5 py-2 px-3 font-medium flex" style="font-size:14px;margin-left:0;border-radius:0 var(--rp-radius) var(--rp-radius) 0;padding-left:24px;font-weight:bold"><span>JavaScript 数据类型</span></div></a><a class="link_03735 menuLink_71eca cursor-pointer" target="" href="/toolset/wiki/ConstructorMethod"><div class="menuItem_71eca mt-0.5 py-2 px-3 font-medium flex" style="font-size:14px;margin-left:0;border-radius:0 var(--rp-radius) var(--rp-radius) 0;padding-left:24px;font-weight:bold"><span>构造方法</span></div></a><a class="link_03735 menuLink_71eca cursor-pointer" target="" href="/toolset/wiki/WebRTC"><div class="menuItem_71eca mt-0.5 py-2 px-3 font-medium flex" style="font-size:14px;margin-left:0;border-radius:0 var(--rp-radius) var(--rp-radius) 0;padding-left:24px;font-weight:bold"><span>WebRTC</span></div></a></nav></div></aside><div class="content_edeb4 rspress-doc-container flex flex-shrink-0 mx-auto"><div class="w-full flex-1"><div><div class="rspress-doc"><!--$--><h1 id="性能优化指标" class="text-3xl mb-10 leading-10 tracking-tight title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#性能优化指标">#</a>性能优化指标</h1>
<span data-dark="false" class="rp-reading-time">预计阅读时间: 16 分钟</span>
<h2 id="引言" class="mt-12 mb-6 pt-8 text-2xl tracking-tight border-t-[1px] border-divider-light title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#引言">#</a>引言</h2>
<p class="my-4 leading-7">性能优化是老生常谈的话题了, 但是我们要做性能优化的前提是什么呢?</p>
<p class="my-4 leading-7">当然是量化性能的标准了啊, 无法量化, 那又何来的优化呢?</p>
<p class="my-4 leading-7">那现在的问题就是如何量化了, 靠体感嘛, 肯定不现实啊, 不同设备, 在不同环境, 不同时间都会有不同的性能表现, 而且体感的阈值也会比较大, 特别明显的才会感觉到</p>
<p class="my-4 leading-7">在这个话题上业界也经过多年的实践, 尝试过许多量化用户体验的方式, 例如</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">测量页面白屏时长</li>
<li class="[&amp;:not(:first-child)]:mt-2">计算可交互耗时 (Time to interact)</li>
<li class="[&amp;:not(:first-child)]:mt-2">计算总阻塞时间 (Total blocking time, TBT)</li>
<li class="[&amp;:not(:first-child)]:mt-2">计算首次有效绘制 (First Meaningful paint, FMP)</li>
</ul>
<p class="my-4 leading-7">这些指标往往逻辑复杂、难以测量, 甚至定义都有歧义, 所以逐渐消亡</p>
<p class="my-4 leading-7">经过大浪淘沙, 近年来近年来最实用的用户体验量化指标是基于开源库 <a target="_blank" rel="noopener noreferrer" href="https://github.com/GoogleChrome/web-vitals" class="link_03735  link_3b154 inline-link_3b154">web-vitals</a> 获取页面渲染耗时, 交互延迟等指标</p>
<h2 id="web-vitals-各指标简介" class="mt-12 mb-6 pt-8 text-2xl tracking-tight border-t-[1px] border-divider-light title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#web-vitals-各指标简介">#</a>web-vitals 各指标简介</h2>
<p class="my-4 leading-7"><code>web-vitals</code> 是谷歌的 Chrome 维护团队于 2020 年开源的工具库, 它基于统一的浏览器 Performance API 获取标准化的用户体验指标</p>
<p class="my-4 leading-7">它主要测量6项指标, 分别是</p>
<ol class="list-decimal pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">首次内容绘制 (First Contentful Paint, FCP)</li>
<li class="[&amp;:not(:first-child)]:mt-2">最大内容绘制 (Largest Contentful Paint, LCP)</li>
<li class="[&amp;:not(:first-child)]:mt-2">首次输入延迟 (First Input Delay , FID)</li>
<li class="[&amp;:not(:first-child)]:mt-2">交互到绘制延迟（Interaction to Next Paint, INP）</li>
<li class="[&amp;:not(:first-child)]:mt-2">累积布局偏移 (Cumulative Layout Shift, CLS)</li>
<li class="[&amp;:not(:first-child)]:mt-2">第一字节时间 (Time to First Byte, TTFB)</li>
</ol>
<h3 id="1-首次内容绘制-first-contentful-paint-fcp" class="mt-10 mb-2 leading-7 text-xl title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#1-首次内容绘制-first-contentful-paint-fcp">#</a>1. 首次内容绘制 (First Contentful Paint, FCP)</h3>
<p class="my-4 leading-7">FCP 测量从页面开始加载到页面中任意部分内容 (文本、图像、<code>svg</code>、<code>canvas</code> 等内容) 完成渲染的时长</p>
<p class="my-4 leading-7">其值为浮点数, 单位是毫秒. FCP 值越小表示该指标状况越好、页面的厨师内容渲染越快</p>
<p class="my-4 leading-7">页面中率先出现的文本图像等视觉可见内容, 直接决定了用户对页面加载速度的主观体验, 所以这一指标选择测量这些内容的渲染耗时, 从而量化用户的主管体验</p>
<p class="my-4 leading-7">注意, FCP 测量的是<strong class="font-semibold">任意部分</strong> DOM 完成渲染的耗时, 而非<strong class="font-semibold">全部</strong>内容完成渲染耗时, 不等于 <code>onLoad</code> 事件</p>
<p class="my-4 leading-7">按照 Chrome 官方的推荐标准, FCP 指标分为 3 个等级</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">优: 小于 1.8 秒</li>
<li class="[&amp;:not(:first-child)]:mt-2">待改进: 大于 1.8 秒且小于 3 秒</li>
<li class="[&amp;:not(:first-child)]:mt-2">差: 大于 3 秒</li>
</ul>
<h3 id="2-最大内容绘制-largest-contentful-paint-lcp" class="mt-10 mb-2 leading-7 text-xl title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#2-最大内容绘制-largest-contentful-paint-lcp">#</a>2. 最大内容绘制 (Largest Contentful Paint, LCP)</h3>
<p class="my-4 leading-7">LCP 测量从页面开始加载到可视区域内<strong class="font-semibold">尺寸最大</strong>的文字或图像渲染完成的耗时</p>
<p class="my-4 leading-7">其值为浮点数, 单位是毫秒. LCP 值越小表示该指标状况越好、最大元素渲染越快</p>
<p class="my-4 leading-7">之所以测量最大的内容, 是因为尺寸最大的内容往往是最能吸引用户的注意力, 其渲染耗时, 直接影响了用户对页面整体渲染速度的体验</p>
<p class="my-4 leading-7">我们可以用 Chrome 浏览器自带的 DevTool 中的 Performance Insights 工具来判断页面中什么元素是最大内容</p>
<p class="my-4 leading-7">按照 Chrome 官方的推荐标准, LCP 指标分为 3 个等级</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">优: 小于 2.5 秒</li>
<li class="[&amp;:not(:first-child)]:mt-2">待改进: 大于 2.5 秒且小于 4 秒</li>
<li class="[&amp;:not(:first-child)]:mt-2">差: 大于 4 秒</li>
</ul>
<h3 id="3-首次输入延迟-first-input-delay--fid" class="mt-10 mb-2 leading-7 text-xl title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#3-首次输入延迟-first-input-delay--fid">#</a>3. 首次输入延迟 (First Input Delay , FID)</h3>
<p class="my-4 leading-7">FID 测量用户首次交互 (点击、触摸) 后到浏览器开始响应之间的时间剪个</p>
<p class="my-4 leading-7">其值为浮点数, 单位是毫秒. FID 值越小表示该指标状况越好, 用户首次与页面交互式, 浏览器响应的延迟学校</p>
<p class="my-4 leading-7">这一指标只关注页面中首次交互的原因是, 首次交互时, 页面汪汪楚玉尚未完全加载的状态, 异步响应数据在等待响应、部分 JS 和 CSS 仍在执行和渲染的过程中, 浏览器的主线成灰短暂的处于忙碌状态, 往往不能及时响应用户交互</p>
<p class="my-4 leading-7">但是第一次交互的延迟长短往往决定了用户对网页流畅度的第一印象, 所以这一指标的测量目标, 也能量化用户的主观体验</p>
<p class="my-4 leading-7">按照 Chrome 官方的推荐标准, FID 指标分为 3 等级:</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">优: 小于 100 毫秒</li>
<li class="[&amp;:not(:first-child)]:mt-2">待改进: 大于 100 毫秒且小于 300 毫秒</li>
<li class="[&amp;:not(:first-child)]:mt-2">差: 大于 300 毫秒</li>
</ul>
<blockquote class="border-l-2 border-solid border-divider pl-4 my-6 transition-colors duration-500 blockquote_3b154">
<p class="my-4 leading-7">FID 指标与下文将要提到的 INP 指标测量目标有所重叠, 且普适性不及 INP, 未来可能会被 INP 替代</p>
</blockquote>
<details class="rspress-directive details"><summary class="rspress-directive-title">扩展知识 (普适性)</summary><div class="rspress-directive-content"><p class="my-4 leading-7">普适性 (Universality) 是指某种特性、原则或规律在广泛的条件下都适用或存在的性质. 这个概念可以用于多个领域, 如数学、物理学、计算机科学以及社会学等</p><ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">数学中的普适性: 不了解</li>
<li class="[&amp;:not(:first-child)]:mt-2">物理学中的普适性: 不了解</li>
<li class="[&amp;:not(:first-child)]:mt-2">计算机科学中的普适性: 图灵机模型展示了计算机的本质, 理论上他可以模拟任何其他计算模型的能力, 这种能力被称为计算机的普适性</li>
<li class="[&amp;:not(:first-child)]:mt-2">社会学中的普适性: 虽然文化背景和社会环境对人们的行为有很大影响, 但有些基本的人类行为模式或者心理特征被认为是跨文化的, 例如亲情关系的重要性、对安全的需求等</li>
</ul><p class="my-4 leading-7">需要注意, 普适性并不意味着<strong class="font-semibold">完全无例外</strong>地适用于每一个案例: 而是指在一个广泛范围内具有高度的一致性和适用性, 在实际应用时, 还需要考虑具体情况下的特殊因素</p></div></details>
<h3 id="4-交互到绘制延迟interaction-to-next-paint-inp" class="mt-10 mb-2 leading-7 text-xl title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#4-交互到绘制延迟interaction-to-next-paint-inp">#</a>4. 交互到绘制延迟（Interaction to Next Paint, INP）</h3>
<p class="my-4 leading-7">INP 测量用户在页面浏览过程中的所有交互 (点击、键盘输入、触摸等) 与浏览器渲染响应的<strong class="font-semibold">整体</strong>延迟情况</p>
<p class="my-4 leading-7">其值为浮点数, 单位是毫秒. INP 值越小表示该指标状况越好, 用户的各类交互响应延迟减小</p>
<p class="my-4 leading-7">与 FID 只关注首次交互不同, INP 会关注用户浏览网页全过程中的<strong class="font-semibold">所有</strong>交互, 所以 <code>web-vitals</code> 库中获取 INP 值的 <code>onINP(FCPReportCallback)</code> 方法, 通常会在页面可视化状态变化或页面卸载时多次触发, 综合统计一段时间内的多次交互, 按特定算法, 计算该时间段内的 INP 指标值</p>
<p class="my-4 leading-7">INP 指标 3 个等级的评分分别为:</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">优: 小于 200 毫秒</li>
<li class="[&amp;:not(:first-child)]:mt-2">待改进: 大于 200 毫秒且小于 500 毫秒</li>
<li class="[&amp;:not(:first-child)]:mt-2">差: 大于 500 毫秒</li>
</ul>
<blockquote class="border-l-2 border-solid border-divider pl-4 my-6 transition-colors duration-500 blockquote_3b154">
<p class="my-4 leading-7">INP 是新进加入 <code>web-vitals</code> 的指标, 仍处于试验阶段, 其标准可能会有调整, 目前描述的是其 2023 年 5 月的状况</p>
</blockquote>
<h3 id="5-累积布局偏移-cumulative-layout-shift-cls" class="mt-10 mb-2 leading-7 text-xl title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#5-累积布局偏移-cumulative-layout-shift-cls">#</a>5. 累积布局偏移 (Cumulative Layout Shift, CLS)</h3>
<p class="my-4 leading-7">CLS 测量页面中所有<strong class="font-semibold">意外</strong>布局变化的累计分值</p>
<p class="my-4 leading-7">其值为浮点数, <strong class="font-semibold">无单位</strong>, 值的大小表示意外布局变化的多少和影响范围的大小</p>
<p class="my-4 leading-7">CLS 值的计算类似 INP, 会统计一段时间内的所有意外布局变化, 按特定算法, 计算出分值</p>
<p class="my-4 leading-7">所谓<strong class="font-semibold">意外布局变化</strong>是指 DOM 元素在前后绘制的 2 帧之间, 非用户交互引起的 DOM 元素尺寸、位置变化</p>
<p class="my-4 leading-7">按照Chrome官方的推荐标准, CLS指标3个等级的评分分别为：</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">优：小于 0.1</li>
<li class="[&amp;:not(:first-child)]:mt-2">待改进：大于 0.1 且小于 0.25</li>
<li class="[&amp;:not(:first-child)]:mt-2">差：大于 0.25</li>
</ul>
<h3 id="6-第一字节时间-time-to-first-byte-ttfb" class="mt-10 mb-2 leading-7 text-xl title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#6-第一字节时间-time-to-first-byte-ttfb">#</a>6. 第一字节时间 (Time to First Byte, TTFB)</h3>
<p class="my-4 leading-7">TTFB 测量前端页面 (Document) 的 HTTP 请求发送后, 到接收到第一个字节数据响应的耗时, 通常包括重定向、DNS 查询、服务器响应延迟等耗时</p>
<p class="my-4 leading-7">其值为浮点数, 单位是毫秒. 值越小表示该值状态越好, 页面 HTTP 响应的耗时越短, 也就是页面的加载更快</p>
<p class="my-4 leading-7">TTFB 指标值的大小直接决定着页面厨师内容渲染耗时的长短, 往往和 <code>FCP</code>、<code>LCP</code> 指标有明显的相关关系, 对用户体验又直接影响, 所以 <code>web-viatals</code> 也将其当作了量化用户体验的指标之一</p>
<p class="my-4 leading-7">除了可以通过 <code>web-vitals</code> 库的 <code>onTTFB()</code> API 获取, 也可以使用 Chrome 自带的 DevTool Network 网络面板计算得出: <code>文档响应的整体耗时 减去 内容下载耗时（Content Download</code></p>
<p class="my-4 leading-7">TTFB指标3个等级的评分分别为：</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">优：小于 800 毫秒</li>
<li class="[&amp;:not(:first-child)]:mt-2">待改进：大于 800 毫秒且小于 1800 毫秒</li>
<li class="[&amp;:not(:first-child)]:mt-2">差：大于 1800 毫秒</li>
</ul>
<p class="my-4 leading-7">尽管以上指标可以通过与原生 Performance API 计算获得, 但仍然推荐使用 <code>web-vitals</code> 库, 因为它帮助我们处理了许多细节问题, 例如标签页处于后台时的计算、指标获取时机、浏览器兼容性等等, 能确保我们测量出标准、稳定的指标数值</p>
<h2 id="6-类指标对比" class="mt-12 mb-6 pt-8 text-2xl tracking-tight border-t-[1px] border-divider-light title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#6-类指标对比">#</a>6 类指标对比</h2>
<table class="block border-collapse text-base my-5 overflow-x-auto leading-7 border-gray-light-3 dark:border-divider"><thead><tr class="border border-solid transition-colors duration-500 even:bg-soft border-gray-light-3 dark:border-divider"><th class="border border-solid px-4 py-2 text-text-1 text-base font-semibold border-gray-light-3 dark:border-divider">名称</th><th class="border border-solid px-4 py-2 text-text-1 text-base font-semibold border-gray-light-3 dark:border-divider">含义</th><th class="border border-solid px-4 py-2 text-text-1 text-base font-semibold border-gray-light-3 dark:border-divider">注意事项</th><th class="border border-solid px-4 py-2 text-text-1 text-base font-semibold border-gray-light-3 dark:border-divider">值单位</th></tr></thead><tbody><tr class="border border-solid transition-colors duration-500 even:bg-soft border-gray-light-3 dark:border-divider"><td class="border border-solid px-4 py-2 border-gray-light-3 dark:border-divider">首次内容绘制(First Contentful Paint, FCP)</td><td class="border border-solid px-4 py-2 border-gray-light-3 dark:border-divider">测量从页面开始加载到页面中任意部分内容（文本、图像、&lt;svg/&gt;、&lt;canvas/&gt;等内容）完成渲染的时长</td><td class="border border-solid px-4 py-2 border-gray-light-3 dark:border-divider">测量任意部分DOM渲染的耗时, 而非全部内容, 不等于页面所有内容完全加载完成的onLoad事件</td><td class="border border-solid px-4 py-2 border-gray-light-3 dark:border-divider">毫秒</td></tr><tr class="border border-solid transition-colors duration-500 even:bg-soft border-gray-light-3 dark:border-divider"><td class="border border-solid px-4 py-2 border-gray-light-3 dark:border-divider">最大内容绘制 (Largest Contentful Paint, LCP)</td><td class="border border-solid px-4 py-2 border-gray-light-3 dark:border-divider">测量从页面开始加载到可视区域内尺寸最大的文字或图像渲染完成的耗时</td><td class="border border-solid px-4 py-2 border-gray-light-3 dark:border-divider">对于UI渲染逻辑复杂的前端应用, 不同优化可能会有不同的最大元素, 统计获得的最大元素可能有多个</td><td class="border border-solid px-4 py-2 border-gray-light-3 dark:border-divider">毫秒</td></tr><tr class="border border-solid transition-colors duration-500 even:bg-soft border-gray-light-3 dark:border-divider"><td class="border border-solid px-4 py-2 border-gray-light-3 dark:border-divider">首次输入延迟(First Input Delay , FID)</td><td class="border border-solid px-4 py-2 border-gray-light-3 dark:border-divider">测量用户首次交互（点击、触摸）后到浏览器开始响应用户交互之间的时间间隔</td><td class="border border-solid px-4 py-2 border-gray-light-3 dark:border-divider">未来可能会被INP替代</td><td class="border border-solid px-4 py-2 border-gray-light-3 dark:border-divider">毫秒</td></tr><tr class="border border-solid transition-colors duration-500 even:bg-soft border-gray-light-3 dark:border-divider"><td class="border border-solid px-4 py-2 border-gray-light-3 dark:border-divider">交互到绘制延迟(Interaction to Next Paint, INP)</td><td class="border border-solid px-4 py-2 border-gray-light-3 dark:border-divider">测量用户在页面浏览过程中的所有交互（点击、键盘输入、触摸等）与浏览器绘制对应响应的整体延迟情况</td><td class="border border-solid px-4 py-2 border-gray-light-3 dark:border-divider">通常会在页面可视化状态变化或页面卸载时进行计算</td><td class="border border-solid px-4 py-2 border-gray-light-3 dark:border-divider">毫秒</td></tr><tr class="border border-solid transition-colors duration-500 even:bg-soft border-gray-light-3 dark:border-divider"><td class="border border-solid px-4 py-2 border-gray-light-3 dark:border-divider">累积布局偏移(Cumulative Layout Shift, CLS)</td><td class="border border-solid px-4 py-2 border-gray-light-3 dark:border-divider">测量页面中, 一定时间段内所有意外布局变化的累计分值</td><td class="border border-solid px-4 py-2 border-gray-light-3 dark:border-divider">- 通常会在页面可视化状态变化或页面卸载时进行计算 - web-viatals提供的onCLS()方法会多次触发 - onCLS()获取到的sources字段可能会因为元素卸载而变成null, 统计时可以使用xpath进行特殊处理</td><td class="border border-solid px-4 py-2 border-gray-light-3 dark:border-divider">分值</td></tr><tr class="border border-solid transition-colors duration-500 even:bg-soft border-gray-light-3 dark:border-divider"><td class="border border-solid px-4 py-2 border-gray-light-3 dark:border-divider">第一字节时间(Time to First Byte, TTFB)</td><td class="border border-solid px-4 py-2 border-gray-light-3 dark:border-divider">测量页面本身 (Document) 的HTTP请求发送后, 到接收到第一字节数据响应的耗时</td><td class="border border-solid px-4 py-2 border-gray-light-3 dark:border-divider">往往和FCP、LCP指标有相关关系</td><td class="border border-solid px-4 py-2 border-gray-light-3 dark:border-divider">毫秒</td></tr></tbody></table>
<h2 id="web-vitals-库使用示例" class="mt-12 mb-6 pt-8 text-2xl tracking-tight border-t-[1px] border-divider-light title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#web-vitals-库使用示例">#</a><code>web-vitals</code> 库使用示例</h2>
<p class="my-4 leading-7">以上 6 项均可通过 <code>web-vitals</code> 库内置的 API 方便的获取, 将 <code>web-vitals</code> 库集成到用户访问的前端页面, 即可方便的获取用户的真实体验数据, 例如:</p>
<div class="rspress-playground rspress-playground-horizontal rspress-playground-reverse-y "><div class="rspress-playground-runner "></div><div class="rspress-playground-editor "><section style="display:flex;position:relative;text-align:initial;width:100%;height:100%"><div style="display:flex;height:100%;width:100%;justify-content:center;align-items:center">Loading...</div><div style="width:100%;display:none"></div></section></div></div>
<p class="my-4 leading-7">要注意的细节是, 这些指标中:</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">onFCP, onTTFB 均在页面初始化是自动触发</li>
<li class="[&amp;:not(:first-child)]:mt-2">onFID 是在用户第一次与页面交互时触发</li>
<li class="[&amp;:not(:first-child)]:mt-2">onCLS, onINP 则因为要测量页面的全生命周期, 往往无固定触发时间点, 在实践中通常会在交互停止一段时间后, 或页面可是状态变化 (例如切换标签页) 后多次触发</li>
<li class="[&amp;:not(:first-child)]:mt-2">onLCP 的触发分 2 种情况<!-- -->
<ol class="list-decimal pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">如果有用户交互, 例如点击、按下按键、会立刻触发 onLCP 回调</li>
<li class="[&amp;:not(:first-child)]:mt-2">如果始终没有用户交互, 则会在页面标签页切换到后台时触发 onLCP 回调</li>
</ol>
</li>
</ul>
<p class="my-4 leading-7"><code>web-vitals</code> 这些指标是 Chrome 维护团队基于海量用户数据, 经过大量实践后设计出来的, 能科学的将主观的用户体验量化为客观的指标, 是我们进行体验优化的必备工具</p>
<p class="my-4 leading-7">大量的收集这些指标数据, 加上汇总分析便可以实现针对用户体验的“真实用户监控”, 从用户客户端收集到<strong class="font-semibold">海量</strong>数据, 要比我们在内部的测试开发环境上测量出的<strong class="font-semibold">少量</strong>数据更全面、更客观、更有说服力, 更有助于我们作出数据驱动的优化策略</p><!--/$--></div><div class="rspress-doc-footer"><footer class="mt-8"><div class="xs:flex pb-5 px-2 justify-end items-center"><div class="flex text-sm text-text-2 leading-6 sm:leading-8 font-medium"><p>最后更新<!-- -->: <span>2024/12/11 14:02:03</span></p></div></div><div class="flex flex-col"></div><div class="flex flex-col sm:flex-row sm:justify-around gap-4 pt-6"><div class="prev_e7091 flex flex-col"><a class="link_03735 pager-link_9b9a7 cursor-pointer" target="" href="/toolset/wiki/elpis/elpis-core"><span class="desc_9b9a7">上一页</span><span class="title_9b9a7">后端框架</span></a></div><div class="next_e7091 flex flex-col"><a class="link_03735 pager-link_9b9a7 next_9b9a7 cursor-pointer" target="" href="/toolset/wiki/Turbo/index"><span class="desc_9b9a7">下一页</span><span class="title_9b9a7">Turbo</span></a></div></div></footer></div></div></div><div class="aside-container_edeb4"><div><div class="flex flex-col"><div class="&lt;lg:hidden"><div id="aside-container" class="relative text-sm font-medium"><div class="leading-7 block text-sm font-semibold pl-3">目录</div><nav class="mt-1"><ul class="relative"><li><a href="#引言" title="引言" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">引言</span></a></li><li><a href="#web-vitals-各指标简介" title="web-vitals 各指标简介" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">web-vitals 各指标简介</span></a></li><li><a href="#1-首次内容绘制-first-contentful-paint-fcp" title="1. 首次内容绘制 (First Contentful Paint, FCP)" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">1. 首次内容绘制 (First Contentful Paint, FCP)</span></a></li><li><a href="#2-最大内容绘制-largest-contentful-paint-lcp" title="2. 最大内容绘制 (Largest Contentful Paint, LCP)" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">2. 最大内容绘制 (Largest Contentful Paint, LCP)</span></a></li><li><a href="#3-首次输入延迟-first-input-delay--fid" title="3. 首次输入延迟 (First Input Delay , FID)" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">3. 首次输入延迟 (First Input Delay , FID)</span></a></li><li><a href="#4-交互到绘制延迟interaction-to-next-paint-inp" title="4. 交互到绘制延迟（Interaction to Next Paint, INP）" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">4. 交互到绘制延迟（Interaction to Next Paint, INP）</span></a></li><li><a href="#5-累积布局偏移-cumulative-layout-shift-cls" title="5. 累积布局偏移 (Cumulative Layout Shift, CLS)" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">5. 累积布局偏移 (Cumulative Layout Shift, CLS)</span></a></li><li><a href="#6-第一字节时间-time-to-first-byte-ttfb" title="6. 第一字节时间 (Time to First Byte, TTFB)" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">6. 第一字节时间 (Time to First Byte, TTFB)</span></a></li><li><a href="#6-类指标对比" title="6 类指标对比" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">6 类指标对比</span></a></li><li><a href="#web-vitals-库使用示例" title="web-vitals 库使用示例" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block"><code>web-vitals</code> 库使用示例</span></a></li></ul></nav></div></div></div></div></div></div></div></section></div></div><div id="search-container"></div></body></html>